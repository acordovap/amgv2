from shared import config as CFG
from agents.song import *
{%- for note in notes %}
from agents.n_{{ note }} import *
{%- endfor %}

import time

from spade import quit_spade

if __name__ == "__main__":

    # init songs
    s = []
    {%- for song in songs %}
    s.append(SongAgent("{{ song }}"+CFG.XMPP_SERVER, "."))
    s[-1].start().result()
    {%- endfor %}

    # init notes
    {%- for note in notes %}
    {{ note }} = Note_{{ note }}("{{ note }}"+CFG.XMPP_SERVER, ".")
    {{ note }}.start().result()
    {%- endfor %}

    # FLAG for start receiving messages on song agents?

    while True:
        try:
            # falta poner wait de songs
            time.sleep(1)
        except KeyboardInterrupt:
            break
    quit_spade()
